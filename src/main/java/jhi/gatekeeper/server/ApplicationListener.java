package jhi.gatekeeper.server;

import java.util.logging.*;

import jakarta.servlet.*;
import jakarta.servlet.annotation.WebListener;

import jhi.gatekeeper.resource.ServerProperty;
import jhi.gatekeeper.server.resource.TokenResource;
import jhi.gatekeeper.server.util.Email;
import jhi.gatekeeper.server.util.watcher.PropertyWatcher;

@WebListener
public class ApplicationListener implements ServletContextListener
{
	@Override
	public void contextInitialized(ServletContextEvent sce)
	{
		System.setProperty("org.jooq.no-logo", "true");
		System.setProperty("org.jooq.no-tips", "true");

		logMessage();

		PropertyWatcher.initialize();
		Email.init();
	}

	@Override
	public void contextDestroyed(ServletContextEvent servletContextEvent)
	{
		PropertyWatcher.stopFileWatcher();
	}

	private void logMessage()
	{
		Logger.getLogger("").log(Level.INFO, "\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@#################%@@@@@@@@@@@@@@@@%////////@@@\r\n" +
			"@@@@@@@@@@@#####################@@@@@@@@@@@@@@(///////#@@@@\r\n" +
			"@@@@@@@@@@#######################@@@@@@@@@@@@////////@@@@@@\r\n" +
			"@@@@@@@@@((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@////////@@@@@@@\r\n" +
			"@@@@@@@@((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@////////@@@@@@@@\r\n" +
			"@@@@@@@((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@////////@@@@@@@@@\r\n" +
			"@@@@@&((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@////////@@@@@@@@@@\r\n" +
			"@@@@#(((((((/@@@@@@@@@@@@@@@@@@@@@@@@@@%##//////@@@@@@@@@@@\r\n" +
			"@@@((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@%####///(@@@@@@@@@@@@\r\n" +
			"@@@(((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@(######/(@@@@@@@@@@@@@\r\n" +
			"@@@(((((((@@@@@@@@,,,,,,,,,,,,,,,*@@@@#######@@@@@@@@@@@@@@\r\n" +
			"@@@((((((((@@@@@@@@,,,,,,,,,,,,,***@@@%#######@@@@@@@@@@@@@\r\n" +
			"@@@@/(((((((#@@@@@@@,,,,,,,,,,,*****@@@%#######@@@@@@@@@@@@\r\n" +
			"@@@@@@((((((((@@@@@@@@@@@@@@@********@@@@#######@@@@@@@@@@@\r\n" +
			"@@@@@@@((((((((@@@@@@@@@@@@@********@@@@@@########@@@@@@@@@\r\n" +
			"@@@@@@@@((((((((@@@@@@@@@@@********@@@@@@@@########@@@@@@@@\r\n" +
			"@@@@@@@@@((((((((@@@@@@@@@********@@@@@@@@@@########@@@@@@@\r\n" +
			"@@@@@@@@@@((((((((///////////////@@@@@@@@@@@@########@@@@@@\r\n" +
			"@@@@@@@@@@@((((((((////////////*@@@@@@@@@@@@@@%#######%@@@@\r\n" +
			"@@@@@@@@@@@@@(((((((//////////@@@@@@@@@@@@@@@@@%########@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n" +
			"\r\n" +
			"               Thanks for using Gatekeeper!\r\n");
	}
}
